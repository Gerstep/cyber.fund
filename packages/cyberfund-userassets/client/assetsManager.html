<!-- originally created for cyber.fund project-->
<template name="assetsManager">
    {{#if currentUser}}
        <section id="assets-manager" class="assets-manager card row">
            <header>
                <h3 class="center">
                    Assets List
                </h3>
            </header>
            {{> addAccount}}
            {{#if currentUser.accounts}}
                {{#each keyValue currentUser.accounts}}
                    {{> displayAccount value=value key=key}}
                {{/each}}
            {{/if}}

            <div id="modal-add-asset" class="modal">
                <div class="modal-content">
                    <h4 class="center">Add asset to account {{currentAccount.name}}</h4>

                    <form id="add-asset-form"
                          account-key="{{session 'currentAccount'}}">
                        <div class="row">
                            <input type="text" name="address" placeholder="Address" id="add-asset-input">
                            <label id="add-asset-error" class="red-text hidden">Asset already exists</label>
                        </div>

                        <div class="row">
                            <a class="btn submit-add-asset  waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                Add</a>
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-asset right grey">Cancel</a>

                        </div>
                    </form>
                </div>
            </div>

            <div id="modal-rename-account" class="modal">
                <div class="modal-content">
                    <h4>Rename account {{currentAccount.name}}</h4>

                    <form id="add-account-form">
                        {{#if currentAccount}}
                        <div class="row">
                            <label for="rename-account-in">New name</label>
                            <input type="text" id="rename-account-in" value="{{currentAccount.name}}"/>
                            <label id="account-rename-exists" class="red-text hidden">Account with that name already exists</label>
                        </div>
                        {{/if}}
                        <div class="row">
                            <a class="btn submit-rename-account  waves-effect">
                                Rename</a>
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-asset right grey">Cancel</a>

                        </div>
                    </form>
                </div>
            </div>

            <div id="modal-remove-account" class="modal">
                <div class="modal-content">
                    {{#if currentAccount}}
                        <h4 class="center">Remove account {{currentAccount.name}}</h4>


                        <div class="row">
                            <p> Are you sure you want to
                                delete {{currentAccount.name}} account?</p>
                        </div>

                        <div class="row">
                            {{#if currentAccount}}
                                <a class="btn submit-remove-account red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                    Delete</a>
                            {{/if}}
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-asset right grey">Cancel</a>

                        </div>
                    {{/if}}
                </div>
            </div>


            <div id="modal-remove-asset" class="modal">
                <div class="modal-content">
                    {{#if currentAccount}}
                        <h4 class="center">Remove asset</h4>


                        <div class="row">
                            <p> Are you sure you want to delete {{currentAssetId}} asset
                                at {{currentAccount.name}} account ?</p>
                        </div>

                        <div class="row">
                            {{#if currentAccount}}
                                <a class="btn submit-remove-asset red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                    Delete</a>
                            {{/if}}
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-asset right grey">Cancel</a>

                        </div>
                    {{/if}}
                </div>
            </div>
        </section>
    {{/if}}
</template>

