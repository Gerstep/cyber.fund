<!-- originally created for cyber.fund project-->
<template name="assetsManager">
    {{#if currentUser}}
        <section id="assets-manager" class="assets-manager row">
            <header>
                <h3 class="center">
                    Assets List
                </h3>
            </header>
            {{> addAccount}}
            {{#if currentUser.accounts}}
                {{#each keyValue currentUser.accounts}}
                    {{> displayAccount value=value key=key}}
                {{/each}}
            {{/if}}

            <div id="modal-add-address" class="modal">
                <div class="modal-content">
                    <h4 class="center">Add address to
                        account {{currentAccount.name}}</h4>

                    <form id="add-address-form"
                          account-key="{{session 'currentAccount'}}">
                        <div class="row">
                            <input type="text" name="address"
                                   placeholder="Address" id="add-address-input">
                            <label id="add-address-error"
                                   class="red-text hidden">Address already
                                exists</label>
                        </div>

                        <div class="row">
                            <a class="btn submit-add-address  waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                Add</a>
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>

                        </div>
                    </form>
                </div>
            </div>

            <div id="modal-rename-account" class="modal">
                <div class="modal-content">
                    <h4>Rename account {{currentAccount.name}}</h4>

                    <form id="add-account-form">
                        {{#if currentAccount}}
                            <div class="row">
                                <label for="rename-account-in">New name</label>
                                <input type="text" id="rename-account-in"
                                       value="{{currentAccount.name}}"/>
                                <label id="account-rename-exists"
                                       class="red-text hidden">Account with that
                                    name already exists</label>
                            </div>
                        {{/if}}
                        <div class="row">
                            <a class="btn submit-rename-account  waves-effect">
                                Rename</a>
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>

                        </div>
                    </form>
                </div>
            </div>

            <div id="modal-remove-account" class="modal">
                <div class="modal-content">
                    {{#if currentAccount}}
                        <h4 class="center">Delete
                            account {{currentAccount.name}}</h4>


                        <div class="row">
                            <p> Are you sure you want to
                                delete {{currentAccount.name}} account?</p>
                        </div>

                        <div class="row">
                            {{#if currentAccount}}
                                <a class="btn submit-remove-account red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                    Delete</a>
                            {{/if}}
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>

                        </div>
                    {{/if}}
                </div>
            </div>


            <div id="modal-remove-address" class="modal">
                <div class="modal-content">
                    {{#if currentAccount}}
                        <h4 class="center">Delete address</h4>


                        <div class="row">
                            <p> Are you sure you want to
                                delete {{currentAddress}} address
                                at {{currentAccount.name}} account ?</p>
                        </div>
                    {{/if}}
                    <div class="row">
                        {{#if currentAccount}}
                            <a class="btn submit-remove-address red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                Delete</a>
                        {{/if}}
                        <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>
                    </div>

                </div>
            </div>


            <div id="modal-add-asset" class="modal">
                <div class="modal-content">
                    <form id="add-asset-form">
                        {{#if currentAccount}}
                            <h4 class="center">Add asset</h4>

                            <div class="row">
                                <p> Add asset to address {{currentAddress}}
                                    (at Account {{currentAccount.name}}) ?</p>
                            </div>
                        {{/if}}
                        <div class="row search-wrap">
                            <div class="col lg-3 md-3 sm-4">
                                {{> searchItem2}}
                            </div>
                            <div class="col lg-9 md-9 sm-8">
                                <input type="text" style="width: 100%; color: black" name="asset-symbol-input" disabled placeholder="Use search bar"
                                       value="{{#if currentAsset}}{{displaySystemName currentAsset}} ({{currentAsset.token.token_symbol}}){{/if}}">
                            </div>
                        </div>
                        <div class="row number-sum-wrapper">
                            <input type="text" name="asset-quantity-input" class="number-sum validate" id="asset-quantity-input"
                                   placeholder="Type amount here"/>
                            <label class="red-text hidden">Please enter valid number</label>
                        </div>
                        <div class="row">
                            {{#if currentAccount}}
                                <a class="btn submit-add-asset red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">Add</a>
                            {{/if}}
                            <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>


            <div id="modal-delete-asset" class="modal">
                <div class="modal-content">
                    {{#if currentAsset}}
                        <h4 class="center">Delete asset</h4>

                        <div class="row">
                            <p> Are you sure you want to delete {{currentAsset.token.token_symbol}}
                                at {{currentAddress}}
                                (Account {{currentAccount.name}}) ?</p>
                        </div>
                    {{/if}}
                    <div class="row">
                        {{#if currentAccount}}
                            <a class="btn submit-delete-asset red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                Delete</a>
                        {{/if}}
                        <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>
                    </div>
                </div>
            </div>

            <div id="modal-edit-asset" class="modal">
                <div class="modal-content">
                    {{#if currentAccount}}
                        <h4 class="center">Edit asset</h4>

                        <div class="row">
                            <p> Change quantity of {{currentAsset.token.token_symbol}}
                                at {{currentAddress}}
                                (Account {{currentAccount.name}}) ?</p>
                            <div class="col lg-3 md-3 sm-4">
                                <input type="text" style="width: 100%; color: black" name="asset-symbol-input" disabled placeholder="Use search bar"
                                       value="{{#if currentAsset}}{{displaySystemName currentAsset}} ({{currentAsset.token.token_symbol}}){{/if}}">
                            </div>
                            <div class="col lg-3 md-3 sm-4">
                                <div class="row number-sum-wrapper">
                                    <input type="text" name="asset-quantity-input" value={{currentAmount}} class="number-sum validate" id="asset-quantity-input"
                                           placeholder="Type amount here"/>
                                    <label class="red-text hidden">Please enter valid number</label>
                                </div>
                            </div>
                        </div>
                    {{/if}}
                    <div class="row">
                        {{#if currentAccount}}
                            <a class="btn submit-edit-asset red waves-effect {{#if session 'addingAccount'}}disabled{{/if}}">
                                Delete</a>
                        {{/if}}
                        <a class="modal-action modal-close btn  waves-effect  cancel-add-address right grey">Cancel</a>

                    </div>
                </div>
            </div>
        </section>
    {{/if}}
</template>

